"use strict";var dayInput=document.querySelector("#day"),monthInput=document.querySelector("#month"),yearInput=document.querySelector("#year"),subBtn=document.querySelector(".submit"),inputs=document.querySelectorAll("input"),daysSpan=document.querySelector("#days"),monthsSpan=document.querySelector("#months"),yearsSpan=document.querySelector("#years"),dateDiff=function(t,e){var n=e.getFullYear()-t.getFullYear(),r=e.getMonth()-t.getMonth(),e=e.getDate()-t.getDate(),n=12*n+r,r=e;return e<0&&(n--,e=(t.getMonth()-1+12)%12,r+=(t=t.getFullYear(),new Date(t,e+1,0).getDate())),{years:Math.floor(n/12),months:n%=12,days:r}},getCurrentAndInputDate=function(t,e,n){return{currentDate:new Date,inputDate:new Date(parseInt(n.value,10),parseInt(e.value,10)-1,parseInt(t.value,10))}},countDate=function(){var t=validateInput(dayInput,dayInput,monthInput,yearInput),e=validateInput(monthInput,dayInput,monthInput,yearInput),n=validateInput(yearInput,dayInput,monthInput,yearInput);t&&e&&n&&(e=(t=getCurrentAndInputDate(dayInput,monthInput,yearInput)).currentDate,n=t.inputDate,t=dateDiff(n,e),daysSpan.textContent=t.days,monthsSpan.textContent=t.months,yearsSpan.textContent=t.years)},validateInput=function(t,e,n,r){var a=t.nextElementSibling,u=t.previousElementSibling,o=parseInt(t.getAttribute("min"),10),s=parseInt(t.getAttribute("max"),10),l=getCurrentAndInputDate(e,n,r),d=l.currentDate,l=l.inputDate;return clearErrors(u,t,a),""===t.value?(addErrors(u,t),!(a.textContent="This field is required")):"year"===t.id&&(parseInt(t.value,10)>d.getFullYear()||parseInt(t.value,10)===d.getFullYear()&&(parseInt(n.value,10)>d.getMonth()+1||parseInt(n.value,10)===d.getMonth()+1&&parseInt(e.value,10)>d.getDate()))?(addErrors(u,t),!(a.textContent="Must be in the past")):null!==o&&parseInt(t.value,10)<o||null!==s&&parseInt(t.value,10)>s?(addErrors(u,t),a.textContent="Must be a valid ".concat(t.id),!1):l.getFullYear()!==parseInt(r.value,10)||l.getMonth()!==parseInt(n.value,10)-1||l.getDate()!==parseInt(e.value,10)?(addErrorToAllInputs([e,n,r],"Must be a valid date"),!1):(clearErrors(u,t,a),!0)},clearErrors=function(t,e,n){t.classList.remove("error"),e.classList.remove("error"),n.textContent=""},addErrors=function(t,e){t.classList.add("error"),e.classList.add("error")},addErrorToAllInputs=function(t,r){t.forEach(function(t){var e=t.previousElementSibling,n=t.nextElementSibling;e.classList.add("error"),t.classList.add("error"),"day"===t.id&&(n.textContent=r)})},enterCheck=function(t){"Enter"===t.key&&countDate()};subBtn.addEventListener("click",countDate),inputs.forEach(function(t){return t.addEventListener("keyup",enterCheck)});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiZGF5SW5wdXQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJtb250aElucHV0IiwieWVhcklucHV0IiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0cyIsImRheXNTcGFuIiwibW9udGhzU3BhbiIsImRhdGVEaWZmIiwiZGF0ZTEiLCJkYXRlMiIsImdldEZ1bGxZZWFyIiwieWVhcnMiLCJnZXRNb250aCIsIm1vbnRocyIsImdldERhdGUiLCJhZGp1c3RlZE1vbnRocyIsImFkanVzdGVkRGF5cyIsImRheXMiLCJwcmV2TW9udGgiLCJ5ZWFyIiwiZGF5c0luTW9udGgiLCJtb250aCIsIk1hdGgiLCJmbG9vciIsImdldEN1cnJlbnRBbmRJbnB1dERhdGUiLCJpbnB1dERhdGUiLCJEYXRlIiwicGFyc2VJbnQiLCJ2YWx1ZSIsImNvdW50RGF0ZSIsImlzRGF5VmFsaWQiLCJ2YWxpZGF0ZUlucHV0IiwiaXNNb250aFZhbGlkIiwiaXNZZWFyVmFsaWQiLCJfZ2V0Q3VycmVudEFuZElucHV0RGEiLCJkaWZmIiwiY3VycmVudERhdGUiLCJ0ZXh0Q29udGVudCIsInllYXJzU3BhbiIsImxhYmVsRWxlbWVudCIsImlucHV0IiwicHJldmlvdXNFbGVtZW50U2libGluZyIsIm1pblZhbHVlIiwibWF4VmFsdWUiLCJnZXRBdHRyaWJ1dGUiLCJfZ2V0Q3VycmVudEFuZElucHV0RGEyIiwiY2xlYXJFcnJvcnMiLCJlcnJvckVsZW1lbnQiLCJhZGRFcnJvcnMiLCJpZCIsImxhYmVsIiwiY2xhc3NMaXN0IiwiY29uY2F0IiwiZXJyb3JNc2ciLCJhZGQiLCJhZGRFcnJvclRvQWxsSW5wdXRzIiwiZm9yRWFjaCIsIm5leHRFbGVtZW50U2libGluZyIsInJlbW92ZSIsImVudGVyQ2hlY2siLCJrZXkiLCJzdWJCdG4iLCJhZGRFdmVudExpc3RlbmVyIiwiZSJdLCJtYXBwaW5ncyI6ImFBQUEsSUFBTUEsU0FBV0MsU0FBU0MsY0FBYyxNQUFNLEVB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QWJkLEVBQU1TLEtBQ1RGLEVBQWFWLFlBQWNnQixFQUU3QixDQUFDLENBQ0YsRUFFTU0sV0FBYSxTQUFDSSxHQUNMLFVBQVZBLEVBQUVILEtBQ0wvQixVQUFTLENBRVgsRUFFQWdDLE9BQU9DLGlCQUFpQixRQUFTakMsU0FBUyxFQUMxQ3pCLE9BQU9vRCxRQUFRLFNBQUNoQixHQUFLLE9BQUtBLEVBQU1zQixpQkFBaUIsUUFBU0gsVUFBVSxDQUFDLENBQUEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBkYXlJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNkYXknKVxyXG5jb25zdCBtb250aElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21vbnRoJylcclxuY29uc3QgeWVhcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3llYXInKVxyXG5jb25zdCBzdWJCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc3VibWl0JylcclxuY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKVxyXG5cclxuY29uc3QgZGF5c1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZGF5cycpXHJcbmNvbnN0IG1vbnRoc1NwYW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjbW9udGhzJylcclxuY29uc3QgeWVhcnNTcGFuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3llYXJzJylcclxuXHJcbi8vb3VyIG1vbnRocyBjYW4gaGF2ZSAzMC8zMS8yOS8yOCBkYXlzXHJcbmNvbnN0IGRhdGVEaWZmID0gKGRhdGUxLCBkYXRlMikgPT4ge1xyXG5cdGNvbnN0IHllYXJzID0gZGF0ZTIuZ2V0RnVsbFllYXIoKSAtIGRhdGUxLmdldEZ1bGxZZWFyKClcclxuXHRjb25zdCBtb250aHMgPSBkYXRlMi5nZXRNb250aCgpIC0gZGF0ZTEuZ2V0TW9udGgoKVxyXG5cdGNvbnN0IGRheXMgPSBkYXRlMi5nZXREYXRlKCkgLSBkYXRlMS5nZXREYXRlKClcclxuXHJcblx0Y29uc3QgZGF5c0luTW9udGggPSAoeWVhciwgbW9udGgpID0+IG5ldyBEYXRlKHllYXIsIG1vbnRoICsgMSwgMCkuZ2V0RGF0ZSgpXHJcblxyXG5cdGxldCBhZGp1c3RlZE1vbnRocyA9IHllYXJzICogMTIgKyBtb250aHNcclxuXHRsZXQgYWRqdXN0ZWREYXlzID0gZGF5c1xyXG5cclxuXHRpZiAoZGF5cyA8IDApIHtcclxuXHRcdGFkanVzdGVkTW9udGhzLS1cclxuXHRcdGNvbnN0IHByZXZNb250aCA9IChkYXRlMS5nZXRNb250aCgpIC0gMSArIDEyKSAlIDEyXHJcblx0XHRhZGp1c3RlZERheXMgKz0gZGF5c0luTW9udGgoZGF0ZTEuZ2V0RnVsbFllYXIoKSwgcHJldk1vbnRoKVxyXG5cdH1cclxuXHJcblx0Y29uc3QgYWRqdXN0ZWRZZWFycyA9IE1hdGguZmxvb3IoYWRqdXN0ZWRNb250aHMgLyAxMilcclxuXHRhZGp1c3RlZE1vbnRocyAlPSAxMlxyXG5cclxuXHRyZXR1cm4geyB5ZWFyczogYWRqdXN0ZWRZZWFycywgbW9udGhzOiBhZGp1c3RlZE1vbnRocywgZGF5czogYWRqdXN0ZWREYXlzIH1cclxufVxyXG5cclxuY29uc3QgZ2V0Q3VycmVudEFuZElucHV0RGF0ZSA9IChkYXlJbnB1dCwgbW9udGhJbnB1dCwgeWVhcklucHV0KSA9PiB7XHJcblx0Y29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xyXG5cdGNvbnN0IGlucHV0RGF0ZSA9IG5ldyBEYXRlKFxyXG5cdFx0cGFyc2VJbnQoeWVhcklucHV0LnZhbHVlLCAxMCksXHJcblx0XHQvL21vbnRocyBhcmUgaW5kZXhlZCBmcm9tIDAgdG8gMTFcclxuXHRcdHBhcnNlSW50KG1vbnRoSW5wdXQudmFsdWUsIDEwKSAtIDEsXHJcblx0XHRwYXJzZUludChkYXlJbnB1dC52YWx1ZSwgMTApXHJcblx0ICApO1xyXG5cdCAgcmV0dXJuIHsgY3VycmVudERhdGUsIGlucHV0RGF0ZSB9O1xyXG59XHJcblxyXG5jb25zdCBjb3VudERhdGUgPSAoKSA9PiB7XHJcblx0Y29uc3QgaXNEYXlWYWxpZCA9IHZhbGlkYXRlSW5wdXQoZGF5SW5wdXQsIGRheUlucHV0LCBtb250aElucHV0LCB5ZWFySW5wdXQpXHJcblx0Y29uc3QgaXNNb250aFZhbGlkID0gdmFsaWRhdGVJbnB1dChtb250aElucHV0LCBkYXlJbnB1dCwgbW9udGhJbnB1dCwgeWVhcklucHV0KVxyXG5cdGNvbnN0IGlzWWVhclZhbGlkID0gdmFsaWRhdGVJbnB1dCh5ZWFySW5wdXQsIGRheUlucHV0LCBtb250aElucHV0LCB5ZWFySW5wdXQpXHJcblxyXG5cdGlmICghaXNEYXlWYWxpZCB8fCAhaXNNb250aFZhbGlkIHx8ICFpc1llYXJWYWxpZCkge1xyXG5cdFx0cmV0dXJuXHJcblx0fVxyXG5cclxuXHRjb25zdCB7IGN1cnJlbnREYXRlLCBpbnB1dERhdGUgfSA9IGdldEN1cnJlbnRBbmRJbnB1dERhdGUoZGF5SW5wdXQsIG1vbnRoSW5wdXQsIHllYXJJbnB1dCk7XHJcblx0Y29uc3QgZGlmZiA9IGRhdGVEaWZmKGlucHV0RGF0ZSwgY3VycmVudERhdGUpXHJcblxyXG5cdGRheXNTcGFuLnRleHRDb250ZW50ID0gZGlmZi5kYXlzXHJcblx0bW9udGhzU3Bhbi50ZXh0Q29udGVudCA9IGRpZmYubW9udGhzXHJcblx0eWVhcnNTcGFuLnRleHRDb250ZW50ID0gZGlmZi55ZWFyc1xyXG59XHJcblxyXG5jb25zdCB2YWxpZGF0ZUlucHV0ID0gKGlucHV0LCBkYXlJbnB1dCwgbW9udGhJbnB1dCwgeWVhcklucHV0KSA9PiB7XHJcblx0Y29uc3QgZXJyb3JFbGVtZW50ID0gaW5wdXQubmV4dEVsZW1lbnRTaWJsaW5nXHJcblx0Y29uc3QgbGFiZWxFbGVtZW50ID0gaW5wdXQucHJldmlvdXNFbGVtZW50U2libGluZ1xyXG5cdGNvbnN0IG1pblZhbHVlID0gcGFyc2VJbnQoaW5wdXQuZ2V0QXR0cmlidXRlKCdtaW4nKSwgMTApXHJcblx0Y29uc3QgbWF4VmFsdWUgPSBwYXJzZUludChpbnB1dC5nZXRBdHRyaWJ1dGUoJ21heCcpLCAxMClcclxuXHRjb25zdCB7IGN1cnJlbnREYXRlLCBpbnB1dERhdGUgfSA9IGdldEN1cnJlbnRBbmRJbnB1dERhdGUoZGF5SW5wdXQsIG1vbnRoSW5wdXQsIHllYXJJbnB1dCk7XHJcblxyXG5cdGNsZWFyRXJyb3JzKGxhYmVsRWxlbWVudCwgaW5wdXQsIGVycm9yRWxlbWVudClcclxuXHJcblx0aWYgKGlucHV0LnZhbHVlID09PSAnJykge1xyXG5cdFx0YWRkRXJyb3JzKGxhYmVsRWxlbWVudCwgaW5wdXQpXHJcblx0XHRlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBgVGhpcyBmaWVsZCBpcyByZXF1aXJlZGBcclxuXHRcdHJldHVybiBmYWxzZVxyXG5cdH0gZWxzZSBpZiAoXHJcblx0XHRpbnB1dC5pZCA9PT0gJ3llYXInICYmXHJcblx0XHQocGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSA+IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgfHxcclxuXHRcdFx0KHBhcnNlSW50KGlucHV0LnZhbHVlLCAxMCkgPT09IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCkgJiZcclxuXHRcdFx0XHQocGFyc2VJbnQobW9udGhJbnB1dC52YWx1ZSwgMTApID4gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDEgfHxcclxuXHRcdFx0XHRcdChwYXJzZUludChtb250aElucHV0LnZhbHVlLCAxMCkgPT09IGN1cnJlbnREYXRlLmdldE1vbnRoKCkgKyAxICYmXHJcblx0XHRcdFx0XHRcdHBhcnNlSW50KGRheUlucHV0LnZhbHVlLCAxMCkgPiBjdXJyZW50RGF0ZS5nZXREYXRlKCkpKSkpXHJcblx0KSB7XHJcblx0XHRhZGRFcnJvcnMobGFiZWxFbGVtZW50LCBpbnB1dClcclxuXHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGBNdXN0IGJlIGluIHRoZSBwYXN0YFxyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0fSBlbHNlIGlmIChcclxuXHRcdChtaW5WYWx1ZSAhPT0gbnVsbCAmJiBwYXJzZUludChpbnB1dC52YWx1ZSwgMTApIDwgbWluVmFsdWUpIHx8XHJcblx0XHQobWF4VmFsdWUgIT09IG51bGwgJiYgcGFyc2VJbnQoaW5wdXQudmFsdWUsIDEwKSA+IG1heFZhbHVlKVxyXG5cdCkge1xyXG5cdFx0YWRkRXJyb3JzKGxhYmVsRWxlbWVudCwgaW5wdXQpXHJcblx0XHRlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBgTXVzdCBiZSBhIHZhbGlkICR7aW5wdXQuaWR9YFxyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0fSBlbHNlIGlmIChcclxuXHRcdGlucHV0RGF0ZS5nZXRGdWxsWWVhcigpICE9PSBwYXJzZUludCh5ZWFySW5wdXQudmFsdWUsIDEwKSB8fFxyXG5cdFx0aW5wdXREYXRlLmdldE1vbnRoKCkgIT09IHBhcnNlSW50KG1vbnRoSW5wdXQudmFsdWUsIDEwKSAtIDEgfHxcclxuXHRcdGlucHV0RGF0ZS5nZXREYXRlKCkgIT09IHBhcnNlSW50KGRheUlucHV0LnZhbHVlLCAxMClcclxuXHQpIHtcclxuXHRcdGFkZEVycm9yVG9BbGxJbnB1dHMoW2RheUlucHV0LCBtb250aElucHV0LCB5ZWFySW5wdXRdLCBgTXVzdCBiZSBhIHZhbGlkIGRhdGVgKVxyXG5cdFx0cmV0dXJuIGZhbHNlXHJcblx0fSBlbHNlIHtcclxuXHRcdGNsZWFyRXJyb3JzKGxhYmVsRWxlbWVudCwgaW5wdXQsIGVycm9yRWxlbWVudClcclxuXHRcdHJldHVybiB0cnVlXHJcblx0fVxyXG59XHJcblxyXG5cclxuY29uc3QgY2xlYXJFcnJvcnMgPSAobGFiZWwsIGlucHV0LCBlcnJvck1zZykgPT4ge1xyXG5cdGxhYmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Vycm9yJylcclxuXHRpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKCdlcnJvcicpXHJcblx0ZXJyb3JNc2cudGV4dENvbnRlbnQgPSAnJ1xyXG59XHJcblxyXG5jb25zdCBhZGRFcnJvcnMgPSAobGFiZWwsIGlucHV0KSA9PiB7XHJcblx0bGFiZWwuY2xhc3NMaXN0LmFkZCgnZXJyb3InKVxyXG5cdGlucHV0LmNsYXNzTGlzdC5hZGQoJ2Vycm9yJylcclxufVxyXG5cclxuY29uc3QgYWRkRXJyb3JUb0FsbElucHV0cyA9IChpbnB1dHMsIGVycm9yTXNnKSA9PiB7XHJcblx0aW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XHJcblx0XHRjb25zdCBsYWJlbEVsZW1lbnQgPSBpbnB1dC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXHJcblx0XHRjb25zdCBlcnJvckVsZW1lbnQgPSBpbnB1dC5uZXh0RWxlbWVudFNpYmxpbmdcclxuXHRcdGxhYmVsRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpXHJcblx0XHRpbnB1dC5jbGFzc0xpc3QuYWRkKCdlcnJvcicpXHJcblx0XHRpZiAoaW5wdXQuaWQgPT09ICdkYXknKSB7XHJcblx0XHRcdGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTXNnXHJcblx0XHR9XHJcblx0fSlcclxufVxyXG5cclxuY29uc3QgZW50ZXJDaGVjayA9IChlKSA9PiB7XHJcblx0aWYgKGUua2V5ID09PSAnRW50ZXInKSB7XHJcblx0XHRjb3VudERhdGUoKVxyXG5cdH1cclxufVxyXG5cclxuc3ViQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY291bnREYXRlKVxyXG5pbnB1dHMuZm9yRWFjaCgoaW5wdXQpID0+IGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZW50ZXJDaGVjaykpXHJcbiJdfQ==
